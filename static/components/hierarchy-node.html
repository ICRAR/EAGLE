<!-- ko if: $data.parentKey === parentKey -->
<div data-bind="text: console.log($data.expanded())"></div>
    <li>
        <div class="hierarchyNode" data-bind="class: $root.isHierarchyNodeSelected($root.objectIsSelectedById(_id)), css:{'hierarchyCollapsed':!$data.expanded()}, attr: { id:key} , click:select, clickBubble:false" params="data:$data, parentKey: key, select: $root.selectNodeInHierarchy">
            <div class="hierarchyNodeColor" data-bind=" style: {'background-color': color}"></div>
            <div class="hierarchyNodeIcons" data-bind="style: {'visibility': $root.hierarchyNodeIsHidden(key())}">
                <i class="material-icons md-18" data-bind="eagleTooltip:'Data node display is toggled off in graph ' + Utils.getKeyboardShortcutTextByKey('toggle_show_data_nodes', true)">visibility_off</i>
            </div>
            <!-- ko if: isGroup -->
                <button class="hierarchyGroupCollapse"  data-bind="click:function(){$root.logicalGraph().findNodeByKey(key).toggleExpanded()}">
                    <i class="material-icons closedIcon" data-bs-placement="top" data-bind="" data-bs-toggle="tooltip" data-html="true" data-bs-original-title="Expand/Collapse">keyboard_arrow_down</i>
                </button>
            <!-- /ko -->
            <h5 data-bind="text: name"></h5>
            <span data-bind="text: category"></span>
            <div>
                <!-- ko if: inputApplication -->
                    <div class="hierarchyNode hierarchyApplication" data-bind="class: $root.isHierarchyApplicationSelected($root.objectIsSelectedById(inputApplication().key())),attr:{id:inputApplication().key()}, style:{'background-color':color}, click:inputApplication().select, clickBubble:false">
                        <div class="hierarchyNodeColor" data-bind=" style: {'background-color': inputApplication().color()}"></div>
                        <h5 data-bind="text:inputApplication().name()"></h5>
                        <span data-bind="text: inputApplication().category()"></span>
                    </div>
                <!-- /ko -->
               
                <ul class="nodes" data-bind="foreach: $root.logicalGraph().getNodes()">
                    <!--<li><span data-bind="text: parentKey() + ' ' + key() + ' ' + $parentContext.key + ' ' + $component.key()"></span></li>-->
                    <!-- ko if: parentKey() === $component.key() -->
                        <hierarchy-node params="data: $data, parentKey: key, select: $root.selectNodeInHierarchy"></hierarchy-node>
                    <!-- /ko -->
                </ul>

                <!-- ko if: outputApplication -->
                    <div class="hierarchyNode hierarchyApplication" data-bind="class: $root.isHierarchyApplicationSelected($root.objectIsSelectedById(_id)),attr:{id:outputApplication().key()}, style:{'background-color':color}, click:select, clickBubble:false">
                        <div class="hierarchyNodeColor" data-bind=" style: {'background-color': outputApplication().color()}"></div>
                        <h5 data-bind="text:outputApplication().name()"></h5>
                        <span data-bind="text: outputApplication().category()"></span>
                    </div>
                <!-- /ko -->
            </div>
        </div>
    </li>
<!-- /ko -->
