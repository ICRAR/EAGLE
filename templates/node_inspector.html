<div id="nodeInspector" class="container px-0">
    <!-- ko if: selectedNode() == null -->
    <div class="row">
        <div class="col">
            <h5 class="card-header" id="nodeInspectorHeading">
                <span style="color:black;">No or multiple nodes selected</span>
            </h5>
        </div>
    </div>
    <!-- /ko -->

    <!-- ko if: selectedNode() != null -->
        <div class="row card-header mb-1" id="nodeInspectorHeading" data-bind="style: {backgroundColor: selectedNode().color}">
            <div class="col-12 headerBtns">
                <div class="inspectorTitleBtns inspectorTitleBtnsLeft">
                    <i class="material-icons md-24" data-bind="class: selectedNode().getIcon()"></i>
                </div>
                <span data-bind="text: selectedNode().getName(), eagleTooltip: getInspectorHeadingTooltip(selectedNode().getName(), selectedNode().getCategory(),selectedNode().description())"></span>
                <div class="inspectorTitleBtns inspectorTitleBtnsRight">
                    <!-- ko if: selectedNode().isLocked() -->
                    <button type="button" class="btn btn-secondary btn-sm" data-bind="click: function() { }, clickBubble: false, eagleTooltip: Utils.getReadOnlyText">
                        <i class="material-icons md-20">lock</i>
                    </button>
                    <!-- /ko -->
                    <!-- ko ifnot: selectedNode().isLocked() -->
                    <button type="button" class="btn btn-secondary btn-sm" data-bind="eagleTooltip: 'readwrite'">
                        <i class="material-icons md-20">lock_open</i>
                    </button>
                    <!-- /ko -->
                    <!-- ko if: Eagle.selectedNodeGraph() -->
                    <button type="button" class="btn btn-secondary btn-sm" data-bind="eagleTooltip: 'Node in Graph'">
                        <i class="material-icons md-20">account_tree</i>
                    </button>
                    <!-- /ko -->
                    <!-- ko if: Eagle.selectedNodePalette() -->
                    <button type="button" class="btn btn-secondary btn-sm" data-bind="eagleTooltip: 'Node in ' + Eagle.selectedNodePalette().fileInfo().name + ' Palette'">
                        <i class="material-icons md-20">palette</i>
                    </button>
                    <!-- /ko -->
                </div>
            </div>
            
            <div class="col-12 headerBtns" id="inspectorHeaderIconRow">
                <div class="row">
                    <div class="col-8">

                    </div>
                    <div class="col-4 text-right">
                        <!-- ko if: Eagle.selectedLocation() == Eagle.FileType.Graph || Setting.findValue(Setting.ALLOW_PALETTE_EDITING) -->
                        <button type="button" id="duplicateSelectedNode" class="btn btn-secondary btn-sm" data-bind="click: function(){duplicateSelection('normal')}, clickBubble: false, eagleTooltip: 'Duplicate Selection ' + Utils.getKeyboardShortcutTextByKey('duplicate_selection', true)" data-bs-placement="left">
                            <i  class="material-icons md-20">content_copy</i>
                        </button>
                        <!-- /ko -->
                        <!-- ko if: Setting.findValue(Setting.ALLOW_PALETTE_EDITING) -->
                        <button type="button" id="addSelectedNodeToPalette" class="btn btn-secondary btn-sm" data-bind="click: function(){addSelectedNodesToPalette('normal')}, clickBubble: false, eagleTooltip: 'Add Selected Node To Palette'" data-bs-placement="left">
                            <i  class="material-icons md-20">library_add</i>
                        </button>
                        <!-- /ko -->
                        <!-- ko if: Eagle.selectedLocation() == Eagle.FileType.Graph || Setting.findValue(Setting.ALLOW_PALETTE_EDITING) -->
                        <button type="button" id="deleteSelectedNode" class="btn btn-secondary btn-sm" data-bind="click: function(){deleteSelection('',false,false);}, clickBubble: false, eagleTooltip: 'Delete Selected Node ' + Utils.getKeyboardShortcutTextByKey('delete_selection', true)" data-bs-placement="left">
                            <i class="material-icons md-20">delete</i>
                        </button>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div class="card pt-2" id="nodeInspectorInfoCard">
            <div class="row">
                <div class="col-6">
                    <h4 class="nodeInspectorSubTitle">Category: <span data-bind="text: selectedNode().getCategory()"></span></h4>
                </div>
                <div class="col-3">
                    <!-- ko if: displayNodeKeys() -->
                    <h4 class="nodeInspectorSubTitle">Key: <span data-bind="text: selectedNode().getKey()"></span></h4>
                    <!-- /ko -->
                </div>
                <div class="col-3 text-right">
                    <!-- ko if: !$root.selectedNode().isLocked() -->
                    <i class="material-icons interactive me-1" data-bs-placement="left" data-bind="click: editNodeCategory, eagleTooltip: 'Edit Node Category'">edit</i>
                    <!-- /ko -->
                    <i class="material-icons interactive me-3" data-bs-placement="left" data-bind="eagleTooltip: selectedNode().getGitHTML()">info</i>
                </div>
            </div>
        </div>

        <div id="inspectorContent">
            <!-- name -->
            <div class="input-group mb-1">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="node-name" data-bind="eagleTooltip:'The name of this component'" data-bs-placement="left">Name</span>
                </div>
                <input type="text" class="form-control" id="nodeNameValue" placeholder="" aria-label="Name" aria-describedby="node-name" data-bind="value: selectedNode().name, readonly: selectedNode().isLocked()">
            </div>

            <!-- key -->
            <div class="input-group mb-1">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="node-name" data-bind="eagleTooltip:'The Key of the component within the graph'" data-bs-placement="left">Key</span>
                </div>
                <input type="text" class="form-control" disabled id="nodePKey" placeholder="" aria-label="Name" aria-describedby="node-name" data-bind="value: selectedNode().getKey()">
            </div>

            <!-- Category -->
            <div class="input-group mb-1">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="node-name" data-bind="eagleTooltip:'The name of this component'" data-bs-placement="left">Category</span>
                </div>
                <select class="form-control" id="nodePKey" placeholder="" aria-label="Name" aria-describedby="node-name" data-bind="value: selectedNode().getCategory(),options:$root.getEligibleNodeCategories(), readonly: selectedNode().isLocked()">
                </select>
                    <!-- ko if: !$root.selectedNode().isLocked() -->
                    <i class="material-icons interactive me-1" data-bs-placement="left" data-bind="click: editNodeCategory, eagleTooltip: 'Edit Node Category'">edit</i>
                    <!-- /ko -->
            </div>

            <!-- description -->
            <div id="inspectorNodeDescriptionWrapper" class="mb-1">
                <!-- ko ifnot: selectedNode().isLocked() || selectedNode().getDescriptionReadonly() -->
                    <button class="btn btn-secondary btn-sm openParamsTableBtn" data-bind="click: $root.editNodeDescription, clickBubble: false, eagleTooltip: 'Edit Description'">
                        <i class="material-icons md-18">edit</i>
                    </button>
                <!-- /ko -->
                <span>Description</span>    
                <div data-bind="html: selectedNode().getDescriptionHTML()"></div>
            </div>

            <!-- node port multiplicity -->
            <div class="input-group mb-1">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="node-name" data-bind="eagleTooltip:'The name of this component'" data-bs-placement="left">Port Multiplicity</span>
                </div>
                <input type="number" disabled class="form-control" id="nodePortMultiplicity" placeholder="" aria-label="Name" aria-describedby="node-name" data-bind="value: $root.logicalGraph().findMultiplicity($root.selectedNode())">
            </div>
        </div>

        <div class="accordion" id="inspectorAccordion" hidden>
            <!-- ko if: selectedNode().getCategory() !== "Description" && selectedNode().getCategory() !== "Comment"-->
            {% include 'node_inspector_description.html' %}
            <!-- /ko -->

            {% include 'node_inspector_display_options.html' %}

            <!-- ko if: selectedNode().canHaveComponentParameters() -->
            {% include 'node_inspector_parameters.html' %}
            <!-- /ko -->

            <!-- ko if: selectedNode().canHaveApplicationArguments() -->
            {% include 'node_inspector_application_parameters.html' %}
            <!-- /ko -->

            <!-- ko if: selectedNode().canHaveConstructParameters() -->
            {% include 'node_inspector_construct_parameters.html' %}
            <!-- /ko -->

            <!-- input application type -->
            <!-- ko if: selectedNode().canHaveInputApplication() -->
            {% include 'node_inspector_input_application.html' %}
            <!-- /ko -->

            <!-- output application type -->
            <!-- ko if: selectedNode().canHaveOutputApplication() -->
            {% include 'node_inspector_output_application.html' %}
            <!-- /ko -->

            <!-- input ports area -->
            <!-- ko if: selectedNode().canHaveInputs() -->
            {% include 'node_inspector_inputs.html' %}
            <!-- /ko -->

            <!-- output ports area -->
            <!-- ko if: selectedNode().canHaveOutputs() -->
            {% include 'node_inspector_outputs.html' %}
            <!-- /ko -->

            <!-- ko if: selectedNode().getCategory() === "Description" -->
            {% include 'node_inspector_graph_description.html' %}
            <!-- /ko -->

            <!-- ko if: selectedNode().getCategory() === "Comment" -->
            {% include 'node_inspector_graph_comment.html' %}
            <!-- /ko -->
        </div>

        <!-- ko if: Setting.showInspectorErrorsWarnings() -->
            <div class="card pt-2" id="nodeInspectorErrorsCard">
                <div class="card-body">
                    <!-- ko with: selectedNode().getErrorsWarnings($root) -->
                        <!-- ko if: Setting.findValue(Setting.SHOW_INSPECTOR_WARNINGS) != Setting.ShowErrorsMode.None -->
                            <!-- ko foreach: errors -->
                                <fix params="data: $data, isError: true"></fix>
                            <!-- /ko -->
                        <!-- /ko -->
                        <!-- ko if: Setting.findValue(Setting.SHOW_INSPECTOR_WARNINGS) === Setting.ShowErrorsMode.Warnings -->
                            <!-- ko foreach: warnings -->
                                <fix params="data: $data, isError: false"></fix>
                            <!-- /ko -->
                        <!-- /ko -->
                    <!-- /ko -->
                </div>
            </div>
        <!-- /ko -->

    <!-- /ko -->
</div>
